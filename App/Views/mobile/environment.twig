{# environment.twig #}
{% import '_macros.twig' as macros %}

<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/color-thief/2.3.0/color-thief.umd.js"></script>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#000000">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!--Manifest-->
    <link rel="manifest" href="/manifest.json?v=12">
    
    <!--Meta-->
    <title>{{ meta.title }}</title> 
    <link rel="icon" href="{{ meta.icon }}">
    <meta name="description" content="{{ meta.description }}">
    <meta name="keywords" content="{{ meta.keywords }}">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="{{ meta.canonical }}">

    <!-- Open Graph -->
    <meta property="og:title" content="{{ meta.og.title }}">
    <meta property="og:description" content="{{ meta.og.description }}">
    <meta property="og:url" content="{{ meta.og.url }}">
    <meta property="og:image" content="{{ meta.og.image }}">
    <meta property="og:type" content="{{ meta.og.type }}">
    <meta property="og:site_name" content="{{ meta.og.site_name }}">

    <!-- VK -->
    <meta property="vk:image" content="{{ meta.vk.image }}">
    <meta name="vk:title" content="{{ meta.vk.title }}">
    <meta name="vk:description" content="{{ meta.vk.description }}">

    <!-- Twitter -->
    <meta name="twitter:card" content="{{ meta.twitter.card }}">
    <meta name="twitter:title" content="{{ meta.twitter.title }}">
    <meta name="twitter:description" content="{{ meta.twitter.description }}">
    <meta name="twitter:image" content="{{ meta.twitter.image }}">
    <meta name="twitter:site" content="{{ meta.twitter.site }}">

    <!-- Telegram -->
    <meta name="telegram:title" content="{{ meta.telegram.title }}">
    <meta name="telegram:description" content="{{ meta.telegram.description }}">
    <meta name="telegram:image" content="{{ meta.telegram.image }}">

    <!--130bit Ico-->
    <link rel="icon" href="web/ico/logos/130bit_black_logo.ico">

    <!--Flash-->
    <link rel='stylesheet' href='web/css/flash/all_in_one.css?v=500'>

    <!--Fonts Modules-->
    <link rel='stylesheet' href='web/css/android/UI_Fonts.css?v=517'>

    <!--MOBILE CONFIG STYLES-->
    <link rel='stylesheet' href='web/css/mobile/config.css?v=700'>
    <link rel='stylesheet' href='web/css/mobile/environment.css?v=811'>

    <!--MOBILE ELEMENTS STYLES-->
    <link rel='stylesheet' href='web/css/mobile/elements/basic.css?v=700'>
    <link rel='stylesheet' href='web/css/mobile/elements/media.css?v=833'>
    <link rel='stylesheet' href='web/css/mobile/elements/comments.css?v=818'>

    <!--MOBILE TEMPLATES STYLES-->
    <link rel='stylesheet' href='web/css/mobile/temp/viewer.css?v=800'>
    <link rel='stylesheet' href='web/css/mobile/temp/album.css?v=703'>
    <link rel='stylesheet' href='web/css/mobile/temp/artist.css?v=720'>
    <link rel='stylesheet' href='web/css/mobile/temp/track.css?v=703'>
    <link rel='stylesheet' href='web/css/mobile/temp/discover.css?v=715'>
    <link rel='stylesheet' href='web/css/mobile/temp/tag.css?v=717'>
    <link rel='stylesheet' href='web/css/mobile/temp/profile.css?v=43'>
    <link rel='stylesheet' href='web/css/mobile/temp/user.css?v=25'>
    <link rel='stylesheet' href='web/css/mobile/temp/edit.css?v=6'>

</head>
<body class='VkSans text-color--light_white text-size--17px text-weight--600 no-scroll'>
    <div id='__PLAYER__' class='Envir__Player no-scroll'>
        <div class='Close EnvirHandler_displayPlayer Cut'>
            Скрыть
        </div>
        <div class='Focus'>
            <div class='Stage2'>
                <div class='Ico __Ico'>
                    <div class='TopRight'>
                        <div class='QuickAction_LikeTrack __LikeArea Button Middle'><div class=''><img class='__Like' src='web/ico/1ED760/heart.png'></div></div>
                    </div>
                </div>
            </div>
            <div class='Stage1'>
                <div class='Info'>
                    <div class='Title Cut __Title'></div>
                    <div class='Ad Cut text-face--regular Regular __Ad'></div>
                </div>
            </div>
            <div class='Stage3'>
                <div class='Stage3-1'>
                    <div class='Area'>
                        <div class='PlayerAction_CurrentTrack Box Action ToolTipeWrap'>
                            <div class='ToolTipe'>О треке</div>
                            <img src='web/ico/696969/a.png'>
                        </div>
                        <div class='PlayerAction_PreviousTrack __StackAction Box Action'><img src='web/ico/eee/left-arrow.png'></div>
                        <div class='Box Interval'></div>
                        <div class='Box Play'>
                            <div class='PlayerAction_PlayOrPause PlayButton __PlayButton'><img src='web/ico/black/play.png'></div>
                        </div>
                        <div class='Box Interval'></div>
                        <div class='PlayerAction_NextTrack __StackAction Box Action'><img src='web/ico/eee/right-arrow.png'></div>
                        <div class='PlayerAction_RepeatTrack __RepeatButton Box Action ToolTipeWrap'>
                            <div class='ToolTipe'>Повтор трека</div>
                            <img src='web/ico/696969/repeat.png'>
                        </div>
                    </div>
                </div>
                <div class='Stage3-2'>
                    <div class="progress-container">
                        <div id='real-player-progress-bar' class="progress-bar"></div>
                        <input id='__REAL-PLAYER-PROGRESS__' class='player-progress' type="range" min="0" max="100" value="0">
                    </div>
                </div>
            </div>
            <div class='Stage4'>
                <iframe id='__PLAYER-IFRAME__' class='SC_Iframe' scrolling='no' frameborder='no' allow='autoplay' src=''></iframe>
            </div>
        </div>
    </div>
    <div id='__PLAYER-STATE-CANVAS__' class='Envir__PlayerStateCanvas'></div>
    <div id='__PLAYER-STATE__' class='Envir__PlayerState'>
        <div class='Info'>
            <div class='Box'><div class='__Ico Ico state--pointer'>
                <div class='__LikeArea Plug QuickAction_LikeTrack'>
                    <div class=''><img class='__Like' src='web/ico/1ED760/heart.png'></div>
                </div>
            </div></div>
            <div class='Bar'>
                <div class='Block'>
                    <div class='__Title Title Cut'></div>
                    <div class='__Ad Ad Cut Regular text-face--regular'></div>
                </div>
            </div>
        </div>
        <div class='Options'>
            <div class='Empty'></div>
            <div class='EnvirHandler_displayPlayer Option'>
                <img src='web/ico/eee/up.png'>
            </div>
        </div>
        <div class='State'>
            <div class='PlayerAction_PlayOrPause PlayButton __PlayButton'><img src='web/ico/black/play.png'></div>
        </div>

        <div class="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
            <input class='player-progress' type="range" id="__PLAYER-PROGRESS__" min="0" max="100" value="0" style='display: none;'>
        </div>
    </div>
    <div id='__MESSAGE__' class='Envir__Message'>
        <div class='__Title Title Cut'>130bit.com</div>
    </div>
    <div id='__DISCOVER__' class='Envir__Discover'>
        <div class='Header'>
            <div class='Box EnvirHandler_displayDiscover'>
                <img src='web/ico/696969/back.png'>
            </div>
            <div class='Bar'>
                <input id='__DISCOVER-INPUT__' class='Regular text-face--regular' type='text' placeholder="Артист, трек, альбом...">
            </div>
        </div>
        <div class='Content no-scroll'>
            <div id='__DISCOVER-RESULT__' class='__Update Result'>
                <div class='Preview'></div>
            </div>
        </div>
    </div>
    <div class='Envir__Show_Ico EnvirHandler_displayPicture'>
        <div class='Wrap'>
            <div class='Ico' onclick='event.stopPropagation();'></div>
            {# <div class='Action'><div class='Button'>Скрыть</div></div> #}
        </div>
    </div>

    <!--Active Area-->
    <div id='__ACTIVE__' class='Envir__Active'></div>

    <!--Bottom Bar-->
    <div class='Envir__Control'>
        <div data-section='viewer' class='ControlPanel_Section Section'>
            <div class='IcoWrap'>
                <svg data-encore-id="icon" role="img" aria-hidden="true" class="Ico" viewBox="0 0 24 24">
                    <path d="M13.5 1.515a3 3 0 0 0-3 0L3 5.845a2 2 0 0 0-1 1.732V21a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-6h4v6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V7.577a2 2 0 0 0-1-1.732l-7.5-4.33z"></path>
                </svg>
            </div>
        </div>
        <div data-section='discover' class='ControlPanel_Section Section'>
            <div class='IcoWrap'>
                <svg data-encore-id="icon" role="img" aria-hidden="true" class="Ico" viewBox="0 0 24 24">
                    <path d="M10.533 1.27893C5.35215 1.27893 1.12598 5.41887 1.12598 10.5579C1.12598 15.697 5.35215 19.8369 10.533 19.8369C12.767 19.8369 14.8235 19.0671 16.4402 17.7794L20.7929 22.132C21.1834 22.5226 21.8166 22.5226 22.2071 22.132C22.5976 21.7415 22.5976 21.1083 22.2071 20.7178L17.8634 16.3741C19.1616 14.7849 19.94 12.7634 19.94 10.5579C19.94 5.41887 15.7138 1.27893 10.533 1.27893ZM3.12598 10.5579C3.12598 6.55226 6.42768 3.27893 10.533 3.27893C14.6383 3.27893 17.94 6.55226 17.94 10.5579C17.94 14.5636 14.6383 17.8369 10.533 17.8369C6.42768 17.8369 3.12598 14.5636 3.12598 10.5579Z"></path>
                </svg>
            </div>
        </div>
        <div data-section='collection' class='ControlPanel_Section Section'>
            <div class='IcoWrap'>
                <svg data-encore-id="icon" role="img" aria-hidden="true" class="Ico" viewBox="0 0 24 24">
                    <path d="M14.5 2.134a1 1 0 0 1 1 0l6 3.464a1 1 0 0 1 .5.866V21a1 1 0 0 1-1 1h-6a1 1 0 0 1-1-1V3a1 1 0 0 1 .5-.866zM16 4.732V20h4V7.041l-4-2.309zM3 22a1 1 0 0 1-1-1V3a1 1 0 0 1 2 0v18a1 1 0 0 1-1 1zm6 0a1 1 0 0 1-1-1V3a1 1 0 0 1 2 0v18a1 1 0 0 1-1 1z"></path>
                </svg>
            </div>
        </div>
        <div data-section='profile' class='ControlPanel_Section Section'>
            <div class='IcoWrap'>
                <div class='IcoAvatar' style='background-image: url({{ macros.getUserPicture(accountData.picture) }});'></div>
            </div>
            {# <div class='InfoWrap Regular text-face--regular'></div> #}
        </div>
    </div>

    
    <!--sc api-->
    <script src="https://w.soundcloud.com/player/api.js"></script>
    <script>
        /*Полетели ёпта*/
        const AUTHO_TOKEN = `{{ sessionToken }}`;
        const HEADER = $('#__HEADER__');
        const ACTIVE = document.getElementById('__ACTIVE__');
        const CONTROL = $('#__CONTROL__');
        const DISCOVER = $('#__DISCOVER__');
        const DISCOVER_VALUE = $('#__DISCOVER-INPUT__');
        const LOADING_PLUG_X = `<div class='Element__LoadingWrap'><div class='Element__CircleLoader Big' style='margin-bottom: 10vh;'></div></div>`;
        const SEARCH_VALUE = $('#__SEARCH-VALUE__');
        const SEARCH_BLOCK = $('#__SEARCH-BLOCK__');
        const PLAYER = $('#__PLAYER__');
        const PLAYER_STATE = $('#__PLAYER-STATE__');
        const PLAYER_STATE_CANVAS = $('#__PLAYER-STATE-CANVAS__');
        const PLAYER_IFRAME = $('#__PLAYER-IFRAME__');
        const ACCOUNT_CONTROL = $('#__ACCOUNT-CONTROL__');
        const IS_USER = '{{ isUser|raw }}';

        $(ACTIVE).html(LOADING_PLUG_X);
    </script>

    <!--Services-->
    <script src="web/js/MessageService.js?v=3000"></script>
    <script src="web/js/PlayerStateModel.js?v=3000"></script>
    <script src="web/js/SoundCloudEmulationService.js?v=3001"></script>

    <!--Models-->
    <script src="web/js/ApiModel.js?v=3000"></script>
    <script src="web/js/EnvironmentModel.js?v=3000"></script>
    <script src="web/js/NavigationModel.js?v=3000"></script>
    <script src="web/js/PlayerModel.js?v=3001"></script>
    <script src="web/js/QuickActionsModel.js?v=3000"></script>
    <script src="web/js/ControlPanelModel.js?v=3001"></script>
    <script src="web/js/SearchingModel.js?v=3000"></script>
    <script src="web/js/ProfileActionsModel.js?v=3000"></script>

    <!--Event Delegator-->
    <script src="web/js/EventDelegatorModel.js?v=3000"></script>

    <!--Services-->
    <script src="web/js/OnloadService.js?v=3000"></script>
    <script src="web/js/ControlResizerService.js?v=3000"></script>
    <script src="web/js/ShortCutsService.js?v=3000"></script>
    <script src="web/js/ColorThiefService.js?v=3002"></script>
    <script src="web/js/CommentsService.js?v=3000"></script>
    <script src="web/js/ShareService.js?v=3000"></script>
    <script src="web/js/HolaPrevent.js?v=3000"></script>

    </body>
</html>